<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <!-- favicon -->
    <link rel="icon" href="favicon.png">

    <!-- meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>QR - Code Arena</title>

    <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700" rel="stylesheet">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="css/bootstrap.min.css">

    <!-- FontAwesome CSS -->
    <link rel="stylesheet" href="css/fontawesome-all.min.css">

    <!-- Swiper CSS -->
    <link rel="stylesheet" href="css/swiper.min.css">

    <!-- Styles -->
    <link rel="stylesheet" href="style.css">
</head>

<body class="contact-page">
    <header class="site-header">
        <div class="header-bar">
            <div class="container-fluid">
                <div class="row align-items-center">
                    <div class="col-10 col-lg-4">
                        <h1 class="site-branding flex">
                            <a href="index.html">Code Arena</a>
                        </h1>
                    </div>

                    <div class="col-2 col-lg-8">
                        <nav class="site-navigation">
                            <div class="hamburger-menu d-lg-none">
                                <span></span>
                                <span></span>
                                <span></span>
                                <span></span>
                            </div><!-- .hamburger-menu -->

                            <ul>
                                <li><a href="index.html">HOME</a></li>
                                <li><a href="brochure.pdf">BROCHURE</a></li>
                                <li><a href="register.html">REGISTER</a></li>
                                <li><a href="getqr.html">GET QR</a></li>
                            </ul><!-- flex -->
                        </nav><!-- .site-navigation -->
                    </div><!-- .col-12 -->
                </div><!-- .row -->
            </div><!-- container-fluid -->
        </div><!-- header-bar -->
    </header><!-- .site-header -->
    <div class="page-header">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <div class="entry-header">
                        <h2 class="entry-title">Get QR</h2>

                        <ul class="breadcrumbs flex align-items-center">
                            <li><a href="#">Home</a></li>
                            <li>Get QR</li>
                        </ul><!-- .breadcrumbs -->
                    </div><!-- entry-header -->
                </div><!-- col-12 -->
            </div><!-- row -->
        </div><!-- container -->
    </div><!-- page-header -->

    <div class="container">
        <div class="main-content">
            
            
            <div class="get-in-touch">
                <div class="entry-header pt-5">
                    <div class="entry-title">
                        <!-- <p>JUST THE BEST</p> -->
                        <h2>Get QR</h2>
                    </div><!-- entry-title -->
                </div><!-- entry-header -->

                <div class="entry-content">
                    <p>Download Your QR Now</p>
                </div><!-- entry-content -->

                <div class="contact-form">
                    <div class="col-12">
                        <input type="email" placeholder="Enter registered email" maxlength="30" id="email">
                    </div><!-- col-4 -->
                    
                    <div class="col-12 submit flex justify-content-center">
                        <button class="btn" id="submitForm">Fetch</button>
                    </div>
                    <div class="col-12 submit flex justify-content-center flex-column align-items-center">
                        <div id="qr-code"></div>
                        <p id="alert" class="text-dark"></p>
                    </div>
                    <br>
                </div>

            </div><!-- newsletter-subscribe -->
        </div><!-- main-content -->
    </div><!-- container -->

    <footer class="site-footer">
        <div class="footer-cover-title flex justify-content-center align-items-center">
            <h2>Code Arena</h2>
        </div><!-- .site-footer -->

        <div class="footer-content-wrapper">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <div class="entry-title">
                            <a href="#">Code Arena</a>
                        </div><!-- entry-title -->

                        <div class="entry-mail">
                            <a href="#">email@email.com</a>
                        </div><!-- .entry-mail -->

                        <div class="copyright-info">
Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | This website is made with <i class="fa fa-heart" aria-hidden="true"></i> by <a href="https://s4hil.github.io" target="_blank">Sahil Showkat</a>
                        </div>

                        <div class="footer-social">
                            <ul class="flex justify-content-center align-items-center">
                            </ul>
                        </div><!-- footer-social -->
                    </div><!-- col -->
                </div><!-- row -->
            </div><!-- container -->
        </div><!-- footer-content-wrapper -->
    </footer><!-- site-footer -->

    <script type='text/javascript' src='js/jquery.js'></script>
    <script type='text/javascript' src='js/masonry.pkgd.min.js'></script>
    <script type='text/javascript' src='js/jquery.collapsible.min.js'></script>
    <script type='text/javascript' src='js/swiper.min.js'></script>
    <script type='text/javascript' src='js/jquery.countdown.min.js'></script>
    <script type='text/javascript' src='js/circle-progress.min.js'></script>
    <script type='text/javascript' src='js/jquery.countTo.min.js'></script>
    <script type='text/javascript' src='js/custom.js'></script>
    <script type='text/javascript' src='js/qrcode.min.js'></script>
    <script type='text/javascript' src='js/config.js'></script>

    <script>
        $("#submitForm").click((e)=>{
            let email = $("#email").val();

            $.ajax({
                url: QR_URL,
                method: "POST",
                data: JSON.stringify({ email:email }),
                dataType: "json",
                success: function (data) {
                    if (data.status == false) {
                        alert("Entered email does not match with submissions.")
                    }
                    else{
                        let x = data.data;
                        let members = x.member1.split('-')[0] +", "+x.member2.split('-')[0] +", "+x.member3.split('-')[0];
                        console.log(members);
                        let teamNumber = "Team_"+x.id;
                        const qrData = {team_number:teamNumber, team_name:x.team_name, participants:members, domain: x.domain};
                        console.log(qrData);
                        new QRCode(document.getElementById("qr-code"), JSON.stringify(qrData));
                        $("#alert").text("Hold and save the image!");
                    }
                },
                error: function () {
                    console.log("err wd get qr data req");
                }
            })
        });
    </script>
</body>
</html>
